---
# ä¸»é¢˜åˆ—è¡¨ï¼šjuejin, github, smartblue, cyanosis, channing-cyan, fancy, hydrogen, condensed-night-purple, greenwillow, v-green, vue-pro, healer-readable, mk-cute, jzman, geek-black, awesome-green, qklhk-chocolate
# è´¡çŒ®ä¸»é¢˜ï¼šhttps://github.com/xitu/juejin-markdown-themes
theme: cyanosis
highlight: monokai-sublime
---
# å‰è¨€

æ­¤å‰ä¸€ç›´è§‰å¾—æ—¶åŒºå°±æ˜¯ä¸ªå°é—®é¢˜ï¼Œå¹¶æ²¡æœ‰ç‰¹æ„å»æ³¨æ„è¿‡ã€‚ç›´åˆ°åœ¨æœ€è¿‘çš„å·¥ä½œä¸­ï¼Œåè€Œå› ä¸ºæ—¶åŒºçš„é—®é¢˜æå¾—æˆ‘è¿·è¿·ç³Šç³Šçš„ã€‚å‡ ç•ªç¢°å£åï¼Œå†³å®šäº²è‡ªæ¢ç©¶ä¸‹ç¨‹åºä¸­çš„æ—¶é—´ç±»å‹åœ¨å­˜å‚¨ã€è¯»å–ä¸æ¯”è¾ƒä¸­åˆ°åº•å…·æœ‰æ€æ ·çš„è¡Œä¸ºã€‚æœ¬æ–‡ä»¥`GO`è¯­è¨€å’Œ`mysql`ä½œä¸ºç¤ºä¾‹ï¼Œä¸ç†Ÿæ‚‰`GO`çš„æœ‹å‹å¯ä»¥ç›´æ¥è·³è‡³ç»“è®ºï¼Œæ€è€ƒä¸‹åœ¨è‡ªå·±ç†Ÿæ‚‰çš„è¯­è¨€ä¸­æ˜¯å¦è¡¨ç°ç›¸åŒã€‚

# å‡†å¤‡å·¥ä½œ

ä¸€åˆ‡ä»ç®€ï¼Œç›´æ¥åˆ›å»ºä¸€ä¸ªæç®€å•çš„è¡¨ï¼Œå¹¶æ’å…¥ä¸€æ¡è®°å½•ï¼Œæ¥ä¸‹æ¥å°±ç ”ç©¶è¿™ä¸ª`updated_at`å­—æ®µï¼š

```sql
-- å»ºè¡¨
CREATE TABLE time_test (
	id INT NOT NULL AUTO_INCREMENT,
	updated_at datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
	PRIMARY KEY (id)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

-- æ’å…¥ä¸€æ¡æ™šä¸Š11ç‚¹çš„æ•°æ®
INSERT INTO time_test(updatedAt) VALUES("2021-01-22 23:00:00");
```

![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/31694aa4c11b45819f30802af27a3307~tplv-k3u1fbpfcp-watermark.image)

# ä»æ•°æ®åº“è¯»å–æ—¶é—´

ç°åœ¨æˆ‘ä»¬æ•°æ®åº“ä¸­æœ‰äº†ä¸€æ¡è®°å½•ï¼Œé‚£ä¹ˆåœ¨ç¨‹åºè¯­è¨€ä¸­ç›´æ¥è¯»å…¥è¿™ä¸ªæ—¶é—´å­—æ®µä¼šæ€æ ·å‘¢? æ˜¯`2021-01-22 23:00:00`å—?

è¿è¡Œå¦‚ä¸‹ç¨‹åºï¼Œè§‚å¯Ÿç»“æœï¼š

> æœ¬æ–‡æ‰€æœ‰å®ä¾‹ç¨‹åºä¸ºäº†ç®€ä¾¿ï¼Œé”™è¯¯å¤„ç†ä»ç®€ï¼Œå…¨æ‰”ç»™å®ƒğŸ‘‰_

```go
package main

import (
	"database/sql"
	"fmt"
	"time"

	// driver
	_ "github.com/go-sql-driver/mysql"
)

var localMysqlDSN = "root:rootroot@tcp(127.0.0.1:3306)/hello?parseTime=true"
func main() {
	db, _ := sql.Open("mysql", localMysqlDSN)
	defer db.Close()
	var (
		id int64
		updatedAt time.Time
	)
	rows, _ := db.Query("SELECT * FROM time_test")
	for rows.Next(){
		_ = rows.Scan(&id, &updatedAt)
		fmt.Printf("id: %v  updatedAt:%v\n", id, updatedAt)
	}
  timeNow := time.Now()
	fmt.Printf("timeNow: %v\n", timeNow)
}
```

![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/216cdf0c88da45f7a9bd8d65795b8dc4~tplv-k3u1fbpfcp-watermark.image)

ä»å›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œä»æ•°æ®åº“ä¸­è¯»å–å‡ºæ¥åæ˜¯`2021-01-22 23:00:00`æ²¡é”™ï¼Œä½†æ˜¯ï¼Œåé¢æœ‰ä¸ªæ—¶åŒº`UTC`ï¼Œè¿™æ˜¯ä¸–ç•Œåè°ƒæ—¶é—´é›¶æ—¶åŒºçš„æ—¶é—´ï¼è€Œæˆ‘ä»¬ç›´æ¥æ‰“å°çš„å½“å‰æ—¶é—´æ˜¯`CST`æ—¶åŒºï¼Œå³ä¸­å›½æ ‡å‡†æ—¶é—´(`China Standard Time`)ï¼ŒCSTæ—¶é—´æ˜¯ç»è¿‡UTCæ—¶é—´+8ä¸ªå°æ—¶åçš„æ—¶é—´ã€‚æ‰€ä»¥ç°åœ¨(æˆ‘è¿è¡Œç¨‹åºçš„æ—¶å€™)è®°å½•ä¸­çš„æ•°æ®`2021-01-22 23:00:00`è¿˜æ˜¯ä¸ªæœªæ¥æ—¶é—´ã€‚

ç…ä¸€çœ¼ï¼Œæ‰“å°å‡ºçš„ç°åœ¨çš„æ—¶é—´`timeNow`, è·Ÿç”µè„‘ä¸Šçš„æ—¶é—´ä¸€è‡´ã€‚æ‰€ä»¥ç¨‹åºä¸­æ—¶é—´ï¼Œé»˜è®¤ä¼šä»¥ç”µè„‘ä¹Ÿå°±æ˜¯ä½ çš„ç³»ç»Ÿæ—¶åŒºä¸ºé»˜è®¤æ—¶åŒºã€‚ä¸ºäº†éªŒè¯è¿™ä¸€ç‚¹ï¼Œä¿®æ”¹ç”µè„‘çš„æ—¶åŒºä¸ºå¤ªå¹³æ´‹æ—¶é—´(ç¾å›½å’ŒåŠ æ‹¿å¤§), ç„¶åè¿è¡Œç¨‹åºï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/78f3865085f24c6bb7383e65890c1349~tplv-k3u1fbpfcp-watermark.image)

å¯ä»¥çœ‹åˆ°æ‰“å°å‡ºçš„å½“å‰æ—¶é—´å˜äº†ï¼Œæ¯”`UTC`æ—¶é—´å°‘8ä¸ªå°æ—¶ã€‚è¯æ˜**ç¨‹åºä¸­çš„æ—¶é—´é»˜è®¤ä¼šä»¥æ“ä½œç³»ç»Ÿä¸­çš„æ—¶åŒºä¸ºé»˜è®¤æ—¶åŒº**, *æŸäº›æ—¶é—´æ“ä½œé™¤å¤–(è§åæ–‡)*ã€‚

> æ‰€ä»¥ï¼Œç”¨dockeræ—¶åœ¨è¿™æ–¹é¢è¸©è¿‡å‘çš„è¯·ä¸¾çˆªã€‚

# å‘æ•°æ®åº“å†™å…¥æ—¶é—´

åœ¨ç¨‹åºä¸­å°†å½“å‰æ—¶é—´å†™å…¥æ•°æ®åº“ï¼Œç„¶ååˆè¯»å–å‡ºæ¥ï¼š

```go
package main

import (
	"database/sql"
	"fmt"
	"time"

	// driver
	_ "github.com/go-sql-driver/mysql"
)

var localMysqlDSN = "root:rootroot@tcp(127.0.0.1:3306)/hello?parseTime=true"
func main() {
	db, _ := sql.Open("mysql", localMysqlDSN)
	defer db.Close()
	
	timeNow := time.Now()
	fmt.Printf("timeNow: %v\n", timeNow)
	
	db.Exec("INSERT INTO time_test(updated_at) VALUES(?)",timeNow)
	
	var (
		id int64
		updatedAt time.Time
	)
	rows, _ := db.Query("SELECT * FROM time_test")
	for rows.Next(){
		_ = rows.Scan(&id, &updatedAt)
		fmt.Printf("id: %v  updatedAt:%v\n", id, updatedAt)
	}
}
```

![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e3f6e12ea974440e94ffbacdedbdcf9e~tplv-k3u1fbpfcp-watermark.image)
![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/970dc8eb066e4033956dcc969e85e477~tplv-k3u1fbpfcp-watermark.image)

å¯ä»¥çœ‹å‡ºï¼Œæ‰“å°çš„å½“å‰æ—¶é—´ä¸ºç¬¦åˆæˆ‘ä»¬ç›´è§‰çš„CSTæ—¶é—´ï¼Œ**å­˜å…¥æ•°æ®åº“åmysqlä¼šè‡ªåŠ¨å°†å…¶è½¬ä¸ºUTCæ—¶é—´è¿›è¡Œå­˜å‚¨**ã€‚å½“æˆ‘ä»¬å†æ¬¡è¯»å–å‡ºæ¥æ—¶ï¼Œè¯»å–çš„ä¹Ÿæ˜¯å‡äº†8ä¸ªå°æ—¶çš„UTCæ—¶é—´ã€‚

# å‘æ•°æ®åº“å†™å…¥æ—¶åŒºæ—¶é—´

ä¸Šé¢çš„è¿‡ç¨‹ä¸­ï¼Œç¨‹åºä½¿ç”¨äº†é»˜è®¤çš„ç³»ç»Ÿæ—¶åŒºï¼Œç°åœ¨æˆ‘ä»¬è®©å½“å‰æ—¶é—´ä¸»åŠ¨åŠ è½½ä¸åŒçš„æ—¶åŒºï¼Œç„¶ååˆ†åˆ«å­˜å…¥æ•°æ®åº“ï¼Œæ˜¯å¦å­˜å‚¨çš„å€¼æ˜¯ä¸€æ ·çš„å‘¢ï¼Ÿ

```go
package main

import (
	"database/sql"
	"fmt"
	"time"

	// driver
	_ "github.com/go-sql-driver/mysql"
)

var localMysqlDSN = "root:rootroot@tcp(127.0.0.1:3306)/hello?parseTime=true"
func main() {
	db, _ := sql.Open("mysql", localMysqlDSN)
	defer db.Close()
	
	cstSh, _ := time.LoadLocation("Asia/Shanghai")
	usNY, _ := time.LoadLocation("America/New_York")
	timeNowCN := time.Now().In(cstSh)
	timeNowNY := time.Now().In(usNY)
	fmt.Printf("timeNowCN: %v\n", timeNowCN)
	fmt.Printf("timeNowNY: %v\n", timeNowNY)
	
	db.Exec("INSERT INTO time_test(updated_at) VALUES(?),(?);",timeNowCN, timeNowNY)
	
	var (
		id int64
		updatedAt time.Time
	)
	rows, _ := db.Query("SELECT * FROM time_test")
	for rows.Next(){
		_ = rows.Scan(&id, &updatedAt)
		fmt.Printf("id: %v  updatedAt:%v\n", id, updatedAt)
	}
}
```
![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c90479a8960e42d4b31e319666bbd57b~tplv-k3u1fbpfcp-watermark.image)

å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œå°½ç®¡`America/New_York`æ—¶åŒºè¦æ¯”UTCæ—¶é—´å°‘5ä¸ªå°æ—¶ï¼Œä½†æ— è®ºæ˜¯ä¸Šæµ·æ—¶åŒºè¿˜æ˜¯å…¶ä»–æ—¶åŒºçš„æ—¶é—´ï¼Œåœ¨å­˜å…¥mysqlæ—¶ï¼Œéƒ½è‡ªåŠ¨è½¬æ¢ä¸ºäº†UTCæ—¶é—´ã€‚æ‰€ä»¥**åŒä¸€æ—¶é—´ç‚¹ä¸åŒæ—¶åŒºçš„ æ—¶é—´åœ¨å­˜å…¥æ•°æ®åº“æ—¶ï¼Œå­˜å‚¨å€¼éƒ½æ˜¯ä¸€æ ·çš„UTCæ—¶é—´**ã€‚

# è·å–æŸä¸ªæ—¶é—´å½“æ—¥é›¶ç‚¹

è®°å¾—å‡†å¤‡å·¥ä½œä¸­æ’å…¥çš„è®°å½•`2021-01-22 23:00:00`å—ï¼Œè¿™æ˜¯æœ‰æ„å®‰æ’çš„ä¸€ä¸ªç‰¹æ®Šæ—¶é—´ï¼Œå› ä¸ºä¸€æ—¦å¤„ç†ä¸å½“æ‰å…¥å‘é‡Œï¼Œä½ å°±ä¼šæŠŠå®ƒå¤„ç†ä¸ºä»Šå¤©(2021å¹´1æœˆ22æ—¥) ï¼å…ˆè¿è¡Œå¦‚ä¸‹ç¨‹åºï¼š

```go
package main

import (
	"database/sql"
	"fmt"
	"time"

	// driver
	_ "github.com/go-sql-driver/mysql"
)

var localMysqlDSN = "root:rootroot@tcp(127.0.0.1:3306)/hello?parseTime=true"
func main() {
	db, _ := sql.Open("mysql", localMysqlDSN)
	defer db.Close()
	
	var (
		id int64
		updatedAt time.Time
	)
  // è¯»å–æ•°æ®åº“ç¬¬ä¸€è¡Œï¼š updateAt = 2021-01-22 23:00:00 UTC
	row := db.QueryRow("SELECT * FROM time_test")
	_ = row.Scan(&id, &updatedAt)
	fmt.Printf("id: %v  updatedAt:%v\n", id, updatedAt)

	cstSh, _ := time.LoadLocation("Asia/Shanghai")

	updatedAtStr := updatedAt.Format("2006-01-02") // 2021-01-22
	updatedAtStrSh := updatedAt.In(cstSh).Format("2006-01-02") // 2021-01-23

	updatedDate1, _ := time.Parse("2006-01-02", updatedAtStr) // 2021-01-22 00:00:00 UTC
	updatedDate2, _ := time.Parse("2006-01-02", updatedAtStrSh) // 2021-01-23 00:00:00 UTC

	updatedDateSh1, _ := time.ParseInLocation("2006-01-02", updatedAtStr, cstSh) // 2021-01-22 00:00:00 CST ä¸Šæµ·
	updatedDateSh2, _ := time.ParseInLocation("2006-01-02", updatedAtStrSh, cstSh) // 2021-01-23 00:00:00 CST ä¸Šæµ·
	
	fmt.Println("updatedDate1:", updatedDate1)
	fmt.Println("updatedDate2:", updatedDate2)
	fmt.Println("updatedDateSh1:", updatedDateSh1)
	fmt.Println("updatedDateSh2:", updatedDateSh2)
}
```

![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d68642d4d3554f8e971575d661db6948~tplv-k3u1fbpfcp-watermark.image)

è¿™é‡Œçš„é€»è¾‘æ˜¯ä¸€ä¸ª2x2çš„é—®é¢˜ï¼Œå³ æ ¼å¼åŒ–æ—¶é—´ä¸ºå­—ç¬¦ä¸²æ—¶ä»¥åŠè§£ææ—¶é—´ä¸ºå­—ç¬¦ä¸²æ—¶ åˆ†åˆ«åŠ è½½æ—¶åŒºä¸å¦ã€‚ä¸ºäº†ä¾¿äºä¸€çœ¼å°±çœ‹æ˜ç™½ï¼Œåˆ—ä¸ªè¡¨æ ¼ï¼š

| æ ¼å¼åŒ–æ—¶é—´ä¸ºå­—ç¬¦ä¸² | è§£æå­—ç¬¦ä¸²ä¸ºæ—¶é—´ | ç»“æœ                      |
| :----------------: | :--------------: | :------------------------ |
|      ä¸å¸¦æ—¶åŒº      |     ä¸å¸¦æ—¶åŒº     | 2021-01-22 00:00:00 UTC   |
|       å¸¦æ—¶åŒº       |     ä¸å¸¦æ—¶åŒº     | 2021-01-23 00:00:00 UTC   |
|      ä¸å¸¦æ—¶åŒº      |      å¸¦æ—¶åŒº      | 2021-01-22 00:00:00 CST   |
|       å¸¦æ—¶åŒº       |      å¸¦æ—¶åŒº      | 2021-01-23 00:00:00 CST âœ” |

> è¿™é‡Œçš„ä¸å¸¦æ—¶åŒºæ˜¯æŒ‡ä¸ä¸»åŠ¨åŠ è½½æ—¶åŒºï¼Œå…¶å®é»˜è®¤çš„æ˜¯UTCæ—¶åŒºã€‚

é¦–å…ˆåˆ†æä¸‹æ­£ç¡®çš„ç»“æœï¼Œ`2021-01-22 23:00:00`åœ¨æ•°æ®åº“ä¸­æ˜¯UTCæ—¶é—´ï¼Œè¦è®¡ç®—å½“æ—¥é›¶ç‚¹æ—¶é—´ï¼Œä»¥UTCæ—¶åŒºæ¥çœ‹ï¼Œå¾ˆæ˜æ˜¾å°±æ˜¯å½“å¤©`2021-01-22 00:00:00`ã€‚ä½†æ˜¯åœ¨ä¸­å›½ï¼Œæˆ‘ä»¬çš„é¡¹ç›®è¿è¡ŒåŸºæœ¬éƒ½è¦æ±‚åŒ—äº¬æ—¶é—´ï¼Œæ‰€ä»¥ï¼Œé¦–å…ˆè¦è½¬åŒ–ä¸ºä¸­å›½æ ‡å‡†æ—¶é—´CSTï¼ŒåŠ 8ä¸ªå°æ—¶å°±æ˜¯`2021-01-23 07:00:00 CST`ï¼Œå†è®¡ç®—å…¶å½“æ—¥é›¶ç‚¹åº”è¯¥ä¸º`2021-01-23 00:00:00 CST`ã€‚æ‰€ä»¥**åœ¨goç¨‹åºä¸­æ ¼å¼åŒ–ã€è§£ææ—¶é—´æ—¶éƒ½è¦åŠ è½½æ—¶åŒº**ã€‚åŒæ—¶å¯ä»¥çœ‹å‡ºgoç¨‹åºçš„å¦‚ä¸‹è¡Œä¸ºï¼š

* `Format()` è§†æ—¶åŒºè€Œå®šï¼Œä¼ å“ªä¸ªæ—¶åŒºçš„æ—¶é—´å€¼ï¼Œå°±æ ¼å¼åŒ–ä¸ºå“ªä¸ªæ—¶åŒºçš„å­—ç¬¦ä¸²ï¼›
* `Parse()`è§£æå­—ç¬¦ä¸²æ—¶é—´æ—¶é»˜è®¤UTCæ—¶åŒºï¼Œä¸ç³»ç»Ÿæ—¶åŒºæ— å…³ï¼›

# æ—¶é—´æ¯”è¾ƒ

å‰é¢åˆ†åˆ«è®¨è®ºäº†æ—¶é—´åœ¨è¯»å†™ã€æ ¼å¼åŒ–ã€è§£ææ—¶æ—¶åŒºçš„è¡¨ç°ã€‚é‚£ä¹ˆæ—¶é—´åœ¨è¿›è¡Œæ¯”è¾ƒæ—¶ï¼Œä¼šå—æ—¶åŒºå½±å“å—ï¼Ÿéœ€è¦å°†æ¯”è¾ƒçš„æ—¶é—´è½¬æ¢åˆ°åŒä¸€ä¸ªæ—¶åŒºå—ï¼Ÿ

ç°åœ¨ä¾ç„¶ä»æ•°æ®åº“ä¸­è·å–`2021-01-22 23:00:00`è¿™æ¡è®°å½•(æ³¨æ„æ˜¯UTCæ—¶é—´)ï¼Œç„¶ååˆ†åˆ«è·å¾—å…¶ä¸åŒæ—¶åŒºä¸‹çš„ä»Šæ—¥é›¶ç‚¹æ—¶é—´æ¥è¿›è¡Œæ¯”è¾ƒï¼š

```go
package main

import (
	"database/sql"
	"fmt"
	"time"

	// driver
	_ "github.com/go-sql-driver/mysql"
)

var localMysqlDSN = "root:rootroot@tcp(127.0.0.1:3306)/hello?parseTime=true"
func main() {
	db, _ := sql.Open("mysql", localMysqlDSN)
	defer db.Close()
	
	var (
		id int64
		updatedAt time.Time
	)
	row := db.QueryRow("SELECT * FROM time_test")
	_ = row.Scan(&id, &updatedAt)
	fmt.Printf("id: %v  updatedAt:%v\n", id, updatedAt)

	cstSh, _ := time.LoadLocation("Asia/Shanghai")
	usNY, _ := time.LoadLocation("America/New_York")
	updatedAtCN :=updatedAt.In(cstSh)
	updatedAtNY :=updatedAt.In(usNY)
	fmt.Printf("updatedAtCN: %v\n", updatedAtCN)
	fmt.Printf("updatedAtNY: %v\n", updatedAtNY)

	// ä¸¤ä¸ªæ—¶åŒºä»Šæ—¥0ç‚¹
	todayDateStrCN := updatedAtCN.Format("2006-01-02")
	todayDateStrNY := updatedAtNY.Format("2006-01-02")
	todayZeroTimeCN, _ := time.ParseInLocation("2006-01-02", todayDateStrCN, cstSh) //ä¸Šæµ·æ—¶åŒº
	todayZeroTimeNY, _ := time.ParseInLocation("2006-01-02", todayDateStrNY, usNY) // çº½çº¦æ—¶åŒº

	fmt.Println("todayZeroTimeCN:", todayZeroTimeCN)
	fmt.Println("todayZeroTimeNY:", todayZeroTimeNY)
	fmt.Println("updatedAt is before China-today  :", updatedAt.Before(todayZeroTimeCN))
	fmt.Println("updatedAt is before NewYork-today:", updatedAt.Before(todayZeroTimeNY))
	fmt.Println("updatedAt is after China-today   :", updatedAt.After(todayZeroTimeCN))
	fmt.Println("updatedAt is after NewYork-today :", updatedAt.After(todayZeroTimeNY))
}
```
![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/796d369bbe014214a4b0a60e980f3241~tplv-k3u1fbpfcp-watermark.image)
`updatedAt`åœ¨ä¸åŒæ—¶åŒºä¸‹ï¼Œä¸€ä¸ªä¸º1æœˆ23æ—¥ï¼Œä¸€ä¸ªä¸º1æœˆ22æ—¥ï¼Œä½†è‚¯å®šéƒ½è¦æ™šäºå½“æ—¥é›¶ç‚¹ã€‚ä»æ¯”è¾ƒç»“æœå¯ä»¥çœ‹å‡ºï¼Œåœ¨ä¸åŒæ—¶åŒºä¸‹è¿›è¡Œæ¯”è¾ƒéƒ½æˆç«‹ï¼Œè¯´æ˜**ç¨‹åºä¸­æ—¶é—´çš„æ¯”è¾ƒæ˜¯æ—¶åŒºæ— å…³çš„**ï¼ˆå…¶å®æ¯”è¾ƒçš„æ˜¯æ—¶é—´æˆ³ï¼‰ã€‚æ‰€ä»¥ä¸åŒæ—¶åŒºçš„æ—¶é—´å¯ä»¥ç›´æ¥è¿›è¡Œæ¯”è¾ƒã€‚

# ç»“è®º

## æ—¶é—´çš„è¯»å†™

è¿™é‡Œç»“è®ºçš„å‰ææ˜¯æˆ‘ä»¬å¹¶æ²¡æœ‰å¯¹æ•°æ®åº“è¿›è¡Œä»»ä½•æ—¶åŒºç›¸å…³çš„è®¾ç½®ï¼Œæ¯”å¦‚`mongo`æœ‰æ—¶åŒºæ„Ÿåº”`tz_aware`é…ç½®ã€‚åœ¨æ­¤å‰æä¸‹ï¼Œå¯ä»¥å¾—å‡ºï¼š

1. é™¤ç‰¹å®šæ“ä½œå¤–ï¼Œç¨‹åºä¸­çš„æ—¶é—´é»˜è®¤ä¸ºæ“ä½œç³»ç»Ÿæ—¶åŒºï¼Œå…¸å‹çš„å¦‚`time.Now()`ã€‚
2. æ— è®ºå“ªä¸ªæ—¶åŒºçš„æ—¶é—´å†™å…¥æ•°æ®åº“æ—¶ï¼Œéƒ½ä¼šè½¬æ¢ä¸ºç›¸åº”çš„UTCæ—¶é—´ï¼›
3. æ—¶é—´åœ¨è¯»å–æ—¶ï¼Œå­˜å…¥çš„æ˜¯UTCæ—¶é—´ï¼Œè¯»å–çš„å°±æ˜¯UTCæ—¶é—´ï¼›

## æ—¶é—´çš„æ ¼å¼åŒ–ä¸è§£æ

1. æ—¶é—´åœ¨æ ¼å¼åŒ–æ—¶éšæ—¶åŒºè€Œå®šï¼Œä¼ é€’çš„æ˜¯å“ªä¸ªæ—¶åŒºçš„æ—¶é—´å€¼ï¼Œå°±æ ¼å¼åŒ–ä¸ºå“ªä¸ªæ—¶åŒºçš„å­—ç¬¦ä¸²ï¼›
2. æ—¶é—´å­—ç¬¦ä¸²åœ¨è§£ææ—¶ï¼Œé»˜è®¤ä¸ºUTCæ—¶åŒºï¼Œä¸ç³»ç»Ÿæ—¶åŒºæ— å…³ï¼›
3. æ‰€ä»¥æ—¶é—´åœ¨æ ¼å¼åŒ–æ—¶ã€è§£ææ—¶éƒ½è¦åŠ è½½æ—¶åŒºï¼›

## æ—¶é—´çš„æ¯”è¾ƒ

1. æ—¶é—´çš„æ¯”è¾ƒä¸æ—¶åŒºæ— å…³ï¼Œä¸åŒæ—¶åŒºçš„æ—¶é—´å¯ä»¥ç›´æ¥è¿›è¡Œæ¯”è¾ƒï¼Œå®é™…æ¯”è¾ƒçš„æ˜¯æ—¶é—´æˆ³ã€‚

# æ€è€ƒâ€”åˆ¤æ–­ä¸¤ä¸ªæ—¥æœŸæ˜¯å¦æ˜¯åŒä¸€å¤©

ä¸‹é¢è¿™æ®µä»£ç ï¼Œæ˜¯æˆ‘åœ¨æ­¤å‰çš„å·¥ä½œä¸­å†™çš„ã€‚å‡è®¾ç³»ç»Ÿçš„æ—¶é—´å·²ç»è®¾ç½®ä¸ºäº†`Asia/Shanghai`æ—¶åŒºï¼Œä½ è§‰å¾—è¿™ä¸ªå¤„ç†å¯¹å—ï¼Ÿ

```go
// IsToday åˆ¤æ–­ç»Ÿè®¡æ—¥æœŸæ˜¯å¦æ˜¯ä»Šå¤©
// statTIme æ˜¯ä»æ•°æ®åº“è·å–ç„¶åä½œä¸ºå‚æ•°ä¼ é€’
var cstSh, _ = time.LoadLocation("Asia/Shanghai") //åŠ è½½æ—¶åŒº

func IsToday(statTime time.Time) bool {
	statTimeStr := statTime.Format("2006-01-02")
	todayTimeStr := time.Now().Format("2006-01-02")
	statDate, err := time.ParseInLocation("2006-01-02", statTimeStr, cstSh)
	if err != nil {
		log.Fatalln(err)
	}
	todayDate, err := time.ParseInLocation("2006-01-02", todayTimeStr, cstSh)
	if err != nil {
		log.Fatalln(err)
	}
	if statDate.Equal(todayDate) {
		return true
	}
	return false
}
```